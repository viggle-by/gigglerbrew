#!/usr/bin/env ruby
require_relative '../lib/giggler_lib'

# Handle global flags
if ARGV.include?('--version')
  puts "Gigglercraft 0.1.0"
  exit
elsif ARGV.include?('--prefix')
  puts Giggler.prefix
  exit
end

cmd = ARGV[0]
package = ARGV[1]

case cmd
when "install"
  if package
    Giggler.install(package)
  else
    puts "Error: No package specified for install."
    Giggler.help
  end
when "remove"
  if package
    Giggler.remove(package)
  else
    puts "Error: No package specified for remove."
    Giggler.help
  end
when "list"
  Giggler.list
when "info"
  if package
    Giggler.info(package)
  else
    puts "Error: No package specified for info."
    Giggler.help
  end
when "search"
  if package
    Giggler.search(package)
  else
    puts "Error: No search query provided."
    Giggler.help
  end
when "update"
  Giggler.update_registry
when "count"
  puts Giggler.package_count
when "help", nil
  Giggler.help
else
  puts "Unknown command: #{cmd}"
  Giggler.help
end